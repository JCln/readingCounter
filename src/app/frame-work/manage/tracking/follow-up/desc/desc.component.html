<section *ngIf="dataSource && route.children.length === 0">
    <form #form="ngForm">
        <section class="contain">

            <div class="input_2" *ngFor="let item of _showDesc">
                <div class="_key">{{item.header}}</div>
                <ng-container
                    *ngIf="dataSource[item.field] === true || dataSource[item.field] === false; else elseTemplate">
                    <mat-checkbox [disabled]="true" name="item.field" [(ngModel)]="dataSource[item.field]">
                        {{item.header}}</mat-checkbox>
                </ng-container>
                <ng-template #elseTemplate>
                    <input [readOnly]="item.readonly" class="_value" name="{{item.field}}"
                        [(ngModel)]="dataSource[item.field]">
                </ng-template>
            </div>

            <div class="check_boxes">
                <mat-checkbox [disabled]="true" name="isBazdid" [(ngModel)]="dataSource.isBazdid">بازدید
                </mat-checkbox>

                <mat-checkbox [disabled]="true" name="isRoosta" [(ngModel)]="dataSource.isRoosta">روستا
                </mat-checkbox>
            </div>

        </section>

    </form>
</section>

<section class="order_by">
    <h2>نمایش :</h2>
    <mat-radio-group class="radio_group" aria-labelledby="radio_group" [(ngModel)]="canShowGraph" name="_isOrderByDate">
        <mat-radio-button class="radio_button" *ngFor="let orderType of showInOrderTo" [value]="orderType.isSelected">
            {{orderType.title}}
        </mat-radio-button>
    </mat-radio-group>
</section>

<p-table *ngIf="!canShowGraph" sortField="insertDateJalali" [columns]="defColumns" [value]="changeHsty" dir="rtl"
    styleClass="p-datatable-responsive" [responsive]="true">

    <ng-template pTemplate="caption">
        <th>
        </th>
        <div class="header_icons_wrap">
            <div class="left_side">
            </div>
            <div class="left_side">
                <i (click)="refreshTable()" class="tooltip _circle_border p_icons pi pi-refresh">
                    <div class="tooltip_text">بارگیری مجدد جدول</div>
                </i>
                <i (click)="trackingManagerService.backToParent()"
                    class="tooltip _circle_border p_icons pi pi-arrow-left">
                    <div class="tooltip_text">بازگشت به پیگیری</div>
                </i>
                <i (click)="toPreStatus()" class="tooltip _circle_border p_icons pi pi-step-backward">
                    <div class="tooltip_text_right">بازگشت به قبلی</div>
                </i>
            </div>
        </div>
    </ng-template>

    <ng-template pTemplate="header" let-columns>
        <tr>
            <th *ngFor="let col of columns" pSortableColumn="{{col.field}}">
                <p-sortIcon field="{{col.field}}"></p-sortIcon>
                {{col.header}}
            </th>
        </tr>
    </ng-template>

    <ng-template pTemplate="body" let-changeHsty let-columns="columns">
        <tr>
            <td *ngFor="let col of columns">
                <ng-container
                    *ngIf="changeHsty[col.field] === true || changeHsty[col.field] === false; else elseTemplate">
                    <mat-checkbox [disabled]="true" [(ngModel)]="changeHsty[col.field]"></mat-checkbox>
                </ng-container>
                <ng-template #elseTemplate>
                    {{changeHsty[col.field]}}
                </ng-template>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage" *ngIf="!dataSource">
        <tr>
            <td [attr.colspan]="dataSource">
                موردی پیدا نشد
            </td>
        </tr>
    </ng-template>
</p-table>
<!-- could implement by lazy load route -->
<app-time-line *ngIf="canShowGraph" [dataSource]="dataSource"></app-time-line>